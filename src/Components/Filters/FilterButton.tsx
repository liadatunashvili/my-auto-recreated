import React, { useContext, useState } from "react";
import CarTypeContext from "../CarTypes/CarTypeContext";
import CombinedFilter from "./CombinedFilter";
import "./FilterButton.css";
import { ProductInterface } from "../Interfaces/ProductInterface";

const FilterButton: React.FC = () => {
  const [filteredProd, setFilteredprod] = useState<ProductInterface[]>([]);
  const {
    products,
    manArr,
    modelArr,
    currentMan,
    chosenModel,
    chosenCategories,
    PriceRange,
    categories, // Add categories from context
  } = useContext(CarTypeContext);

  const handleClick = (): void => {
    const filteredProducts = CombinedFilter(
      products,
      manArr,
      modelArr,
      currentMan,
      chosenModel,
      chosenCategories,
      PriceRange,
      categories
    );
    console.log("Clicked")

    setFilteredprod(filteredProducts);
  };

  return (
    <div className="filtrisghilaki">
      <div className="primary-icon">
        <button className="search" onClick={()=>handleClick()}>
          <svg
            width="202"
            height="32"
            viewBox="0 0 202 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="202" height="32" rx="6" fill="#FD4100" />
            <path
              d="M57.7466 20.14C56.9999 20.14 56.3512 19.9907 55.8006 19.692C55.2499 19.384 54.8299 18.9593 54.5406 18.418C54.2512 17.8767 54.1066 17.2513 54.1066 16.542C54.1066 15.8327 54.2466 15.2027 54.5266 14.652C54.8066 14.1013 55.1986 13.6767 55.7026 13.378C56.2159 13.07 56.8039 12.916 57.4666 12.916C57.8866 12.916 58.2692 12.9813 58.6146 13.112C58.9599 13.2427 59.2352 13.4247 59.4406 13.658V9.122H61.4006V16.542C61.4006 17.2607 61.2559 17.8907 60.9666 18.432C60.6772 18.9733 60.2572 19.3933 59.7066 19.692C59.1559 19.9907 58.5026 20.14 57.7466 20.14ZM57.7606 18.46C58.2552 18.46 58.6566 18.2967 58.9646 17.97C59.2726 17.6433 59.4266 17.2187 59.4266 16.696V16.374C59.4266 15.8327 59.2726 15.4033 58.9646 15.086C58.6659 14.7593 58.2646 14.596 57.7606 14.596C57.2566 14.596 56.8506 14.7687 56.5426 15.114C56.2346 15.4593 56.0806 15.9307 56.0806 16.528C56.0806 17.1253 56.2346 17.5967 56.5426 17.942C56.8599 18.2873 57.2659 18.46 57.7606 18.46ZM66.1105 23.71C65.3918 23.71 64.7618 23.57 64.2205 23.29C63.6885 23.01 63.2778 22.618 62.9885 22.114C62.6991 21.6193 62.5545 21.0453 62.5545 20.392C62.5545 20.0187 62.6105 19.6313 62.7225 19.23L64.6405 19.314C64.5658 19.6407 64.5285 19.9393 64.5285 20.21C64.5285 20.77 64.6685 21.2133 64.9485 21.54C65.2285 21.8667 65.6205 22.03 66.1245 22.03C66.6005 22.03 66.9831 21.8713 67.2725 21.554C67.5711 21.246 67.7205 20.8027 67.7205 20.224V16.178C67.7205 15.6273 67.5805 15.226 67.3005 14.974C67.0298 14.7127 66.6751 14.582 66.2365 14.582C65.7885 14.582 65.4385 14.7173 65.1865 14.988C64.9438 15.2587 64.8225 15.618 64.8225 16.066C64.8225 16.2527 64.8458 16.4953 64.8925 16.794L62.9185 16.85C62.8531 16.5513 62.8205 16.248 62.8205 15.94C62.8205 15.3333 62.9651 14.8013 63.2545 14.344C63.5531 13.8867 63.9591 13.5367 64.4725 13.294C64.9858 13.042 65.5645 12.916 66.2085 12.916C66.8618 12.916 67.4498 13.0513 67.9725 13.322C68.5045 13.5833 68.9198 13.966 69.2185 14.47C69.5265 14.974 69.6805 15.5667 69.6805 16.248V20.224C69.6805 21.2973 69.3631 22.1467 68.7285 22.772C68.0938 23.3973 67.2211 23.71 66.1105 23.71ZM75.9584 13.07C76.7237 13.2847 77.335 13.7 77.7924 14.316C78.259 14.932 78.4924 15.674 78.4924 16.542C78.4924 17.2607 78.329 17.8953 78.0024 18.446C77.685 18.9873 77.2464 19.4073 76.6864 19.706C76.1357 19.9953 75.5104 20.14 74.8104 20.14C74.1104 20.14 73.4757 19.9953 72.9064 19.706C72.3464 19.4073 71.9077 18.9873 71.5904 18.446C71.273 17.8953 71.1144 17.2607 71.1144 16.542C71.1144 15.618 71.371 14.8433 71.8844 14.218C72.3977 13.5833 73.0744 13.1773 73.9144 13V11.992C73.9144 11.8147 73.8724 11.6653 73.7884 11.544C73.7137 11.4227 73.5877 11.278 73.4104 11.11C73.2237 10.9327 73.0744 10.774 72.9624 10.634C72.8597 10.4847 72.771 10.2887 72.6964 10.046C72.631 9.794 72.6124 9.486 72.6404 9.122H74.6704C74.6704 9.41133 74.717 9.64 74.8104 9.808C74.913 9.96667 75.067 10.144 75.2724 10.34C75.4964 10.5547 75.6644 10.7647 75.7764 10.97C75.8977 11.1753 75.9584 11.4647 75.9584 11.838V13.07ZM74.8104 18.46C75.3144 18.46 75.725 18.2873 76.0424 17.942C76.3597 17.5967 76.5184 17.13 76.5184 16.542C76.5184 15.954 76.3597 15.4873 76.0424 15.142C75.725 14.7873 75.3144 14.61 74.8104 14.61C74.297 14.61 73.8817 14.7827 73.5644 15.128C73.2564 15.4733 73.1024 15.9447 73.1024 16.542C73.1024 17.1393 73.2564 17.6107 73.5644 17.956C73.8817 18.292 74.297 18.46 74.8104 18.46ZM83.5767 20.14C82.8207 20.14 82.1673 19.9907 81.6167 19.692C81.066 19.3933 80.646 18.9733 80.3567 18.432C80.0673 17.8907 79.9227 17.2607 79.9227 16.542V12.062C79.9227 11.166 80.212 10.452 80.7907 9.92C81.3693 9.388 82.1627 9.122 83.1707 9.122H86.7267V10.802H83.3247C82.858 10.802 82.4987 10.9093 82.2467 11.124C82.004 11.3293 81.8827 11.6373 81.8827 12.048V13.658C82.088 13.4247 82.3633 13.2427 82.7087 13.112C83.054 12.9813 83.4367 12.916 83.8567 12.916C84.5193 12.916 85.1027 13.07 85.6067 13.378C86.12 13.6767 86.5167 14.1013 86.7967 14.652C87.0767 15.2027 87.2167 15.8327 87.2167 16.542C87.2167 17.2513 87.072 17.8767 86.7827 18.418C86.4933 18.9593 86.0733 19.384 85.5227 19.692C84.972 19.9907 84.3233 20.14 83.5767 20.14ZM83.5627 18.46C84.0573 18.46 84.4587 18.2873 84.7667 17.942C85.084 17.5967 85.2427 17.1253 85.2427 16.528C85.2427 15.9307 85.0887 15.4593 84.7807 15.114C84.4727 14.7687 84.0667 14.596 83.5627 14.596C83.0587 14.596 82.6527 14.7593 82.3447 15.086C82.046 15.4033 81.8967 15.8327 81.8967 16.374V16.696C81.8967 17.2187 82.0507 17.6433 82.3587 17.97C82.6667 18.2967 83.068 18.46 83.5627 18.46ZM92.6497 13.07C92.6497 13.3873 92.729 13.658 92.8877 13.882C93.0463 14.106 93.289 14.358 93.6157 14.638C93.8957 14.89 94.1243 15.1187 94.3017 15.324C94.4883 15.5293 94.647 15.7907 94.7777 16.108C94.9083 16.4253 94.9737 16.7987 94.9737 17.228C94.983 17.8533 94.8383 18.3853 94.5397 18.824C94.2503 19.2533 93.8537 19.58 93.3497 19.804C92.8457 20.028 92.2857 20.14 91.6697 20.14C91.0443 20.14 90.4797 20.0187 89.9757 19.776C89.481 19.524 89.089 19.1693 88.7997 18.712C88.5103 18.2453 88.3657 17.7087 88.3657 17.102C88.3657 16.8407 88.403 16.5373 88.4777 16.192L90.3957 16.262C90.3583 16.5607 90.3397 16.7987 90.3397 16.976C90.3397 17.4333 90.4563 17.8067 90.6897 18.096C90.9323 18.3853 91.259 18.53 91.6697 18.53C92.0897 18.53 92.421 18.418 92.6637 18.194C92.9063 17.97 93.0323 17.648 93.0417 17.228C93.0417 16.9107 92.9577 16.6493 92.7897 16.444C92.631 16.2293 92.379 15.9773 92.0337 15.688C91.7257 15.436 91.4783 15.2073 91.2917 15.002C91.105 14.7967 90.951 14.5353 90.8297 14.218C90.7083 13.9007 90.6617 13.518 90.6897 13.07H92.6497ZM101.041 12.104L99.6268 13.126L98.7308"
              fill="white"
            />
          </svg>
        </button>
      </div>
      <div className="Rectangle13"></div>
    </div>
  );
};

export default FilterButton;
